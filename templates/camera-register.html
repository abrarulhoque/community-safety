{% extends "base.html" %} {% block content %}

<!-- Hero Section -->
<section class="hero-section">
  <div class="hero-background"></div>
  <div class="container">
    <div class="row align-items-center min-vh-100">
      <div class="col-lg-6" data-aos="fade-right" data-aos-duration="1000">
        <div class="hero-content">
          <span class="hero-badge">üìπ Camera Network</span>
          <h1 class="hero-title">
            Register Your <span class="gradient-text">Security Camera</span>
            <br />For Community Safety
          </h1>
          <p class="hero-description">
            Join our verified camera network to help improve neighborhood
            safety. Your camera information will be securely stored and only
            accessed by verified officials when needed for incident
            investigations.
          </p>
          <div class="hero-stats">
            <div class="stat-item">
              <span class="stat-number">2.5K+</span>
              <span class="stat-label">Registered Cameras</span>
            </div>
            <div class="stat-item">
              <span class="stat-number">85%</span>
              <span class="stat-label">Coverage Areas</span>
            </div>
            <div class="stat-item">
              <span class="stat-number">100%</span>
              <span class="stat-label">Privacy Protected</span>
            </div>
          </div>
          <div class="hero-trust">
            <span>Trusted by thousands of residents</span>
            <div class="trust-badges">
              <span class="badge">üîí Secure</span>
              <span class="badge">‚úì Verified</span>
              <span class="badge">üõ°Ô∏è Protected</span>
            </div>
          </div>
        </div>
      </div>
      <div
        class="col-lg-6"
        data-aos="fade-left"
        data-aos-duration="1000"
        data-aos-delay="200"
      >
        <div class="hero-image-container">
          <div class="hero-card floating">
            <div class="card-header">
              <div class="status-indicator active"></div>
              <span>Camera Coverage</span>
            </div>
            <div class="card-content">
              <div class="metric">
                <span class="metric-value">12</span>
                <span class="metric-label">Your Neighborhood</span>
                <span class="metric-trend up">‚Üó +3 this month</span>
              </div>
              <div class="metric">
                <span class="metric-value">98%</span>
                <span class="metric-label">Street Coverage</span>
                <span class="metric-trend up">‚Üó +5%</span>
              </div>
            </div>
          </div>
          <div class="hero-card floating delay-1">
            <div class="card-icon">üîí</div>
            <div class="card-text">
              <strong>Privacy Protected</strong>
              <p>Your camera feeds remain private and secure</p>
              <span class="timestamp">Always encrypted</span>
            </div>
          </div>
          <div class="hero-card floating delay-2">
            <div class="card-icon">‚ö°</div>
            <div class="card-text">
              <strong>Quick Response</strong>
              <p>Help reduce emergency response times</p>
              <span class="timestamp">24/7 monitoring</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="scroll-indicator">
    <div class="scroll-text">Scroll to register</div>
    <div class="scroll-arrow"></div>
  </div>
</section>

<!-- Registration Form Section -->
<section class="features-section">
  <div class="container">
    <div class="section-header text-center">
      <span class="section-tag">Camera Registration</span>
      <h2 class="section-title">Secure Camera Registration Form</h2>
      <p class="section-description">
        Help improve neighborhood safety by registering your security cameras in
        our community network.
      </p>
    </div>

    <div class="row justify-content-center">
      <div class="col-lg-10">
        <div class="row g-4">
          <!-- Benefits Sidebar -->
          <div class="col-lg-4 order-lg-2">
            <div class="feature-card featured sticky-lg-top" style="top: 100px">
              <div class="feature-badge">Why Register?</div>
              <div class="feature-icon">
                <i class="material-icons">security</i>
              </div>
              <div class="feature-content">
                <h3>Registration Benefits</h3>
                <ul class="feature-list">
                  <li>‚úì Enhanced neighborhood safety</li>
                  <li>‚úì Privacy fully protected</li>
                  <li>‚úì Community coverage mapping</li>
                  <li>‚úì Verified officials only</li>
                  <li>‚úì Anonymous participation</li>
                  <li>‚úì Free verification service</li>
                </ul>

                <div class="feature-stats mt-4">
                  <div class="stat-mini">
                    <span class="stat-number">2.5K+</span>
                    <span class="stat-label">Cameras Registered</span>
                  </div>
                  <div class="stat-mini">
                    <span class="stat-number">47%</span>
                    <span class="stat-label">Crime Reduction</span>
                  </div>
                </div>

                <div class="alert alert-info small mb-0 mt-3">
                  <i class="material-icons small align-middle me-2">info</i>
                  Your camera information is only visible to verified safety
                  leaders and law enforcement officials.
                </div>
              </div>
            </div>
          </div>

          <!-- Registration Form -->
          <div class="col-lg-8 order-lg-1">
            <div class="feature-card">
              <div class="feature-icon">
                <i class="material-icons">videocam</i>
              </div>
              <div class="feature-content">
                <h3>Camera Registration Form</h3>

                <form
                  method="POST"
                  action="{{ url_for('camera_register_page') }}"
                >
                  {{ form.hidden_tag() }}
                  <!-- Hidden fields for latitude and longitude -->
                  <input
                    type="hidden"
                    id="camera_latitude"
                    name="camera_latitude"
                  />
                  <input
                    type="hidden"
                    id="camera_longitude"
                    name="camera_longitude"
                  />

                  <!-- Camera Location Section -->
                  <div class="form-section mb-4">
                    <h6 class="form-section-title">üìç Camera Location</h6>

                    <div class="mb-3">
                      {{ form.address.label(class="form-label") }}
                      {% if form.address.errors %}
                      {{ form.address(class="form-control is-invalid", id="camera_address") }}
                      <div class="invalid-feedback">
                        {% for error in form.address.errors %}<span>{{
                          error
                        }}</span
                        >{% endfor %}
                      </div>
                      {% else %}
                      {{ form.address(class="form-control", id="camera_address") }}
                      {% endif %}
                      <div class="form-text text-muted">
                        <i class="material-icons small">info</i> Pre-filled from
                        your profile
                      </div>
                    </div>

                    <div class="mb-3">
                      <label class="form-label"
                        >üìç Precise Camera Position</label
                      >
                      <div class="map-container">
                        <div
                          id="cameraRegistrationMap"
                          style="height: 400px; width: 100%"
                        ></div>
                      </div>
                      <div class="form-text text-muted">
                        <i class="material-icons small">drag_indicator</i> Drag
                        the camera icon to indicate exact position on your
                        property
                      </div>
                    </div>
                  </div>

                  <!-- Camera Details Section -->
                  <div class="form-section mb-4">
                    <h6 class="form-section-title">üìπ Camera Details</h6>

                    <div class="row mb-3">
                      <div class="col-md-6">
                        {{ form.camera_name.label(class="form-label") }}
                        {% if form.camera_name.errors %}
                        {{ form.camera_name(class="form-control is-invalid") }}
                        <div class="invalid-feedback">
                          {% for error in form.camera_name.errors %}<span>{{
                            error
                          }}</span
                          >{% endfor %}
                        </div>
                        {% else %}
                        {{ form.camera_name(class="form-control", placeholder="e.g., Front Door Camera") }}
                        {% endif %}
                      </div>
                      <div class="col-md-6">
                        {{ form.camera_type.label(class="form-label") }}
                        {% if form.camera_type.errors %}
                        {{ form.camera_type(class="form-select is-invalid") }}
                        <div class="invalid-feedback">
                          {% for error in form.camera_type.errors %}<span>{{
                            error
                          }}</span
                          >{% endfor %}
                        </div>
                        {% else %}
                        {{ form.camera_type(class="form-select") }}
                        {% endif %}
                      </div>
                    </div>

                    <div class="row mb-3">
                      <div class="col-md-6">
                        {{ form.camera_brand.label(class="form-label") }}
                        {% if form.camera_brand.errors %}
                        {{ form.camera_brand(class="form-select is-invalid") }}
                        <div class="invalid-feedback">
                          {% for error in form.camera_brand.errors %}<span>{{
                            error
                          }}</span
                          >{% endfor %}
                        </div>
                        {% else %}
                        {{ form.camera_brand(class="form-select") }}
                        {% endif %}
                      </div>
                      <div class="col-md-6">
                        {{ form.recording_type.label(class="form-label") }}
                        {% if form.recording_type.errors %}
                        {{ form.recording_type(class="form-select is-invalid") }}
                        <div class="invalid-feedback">
                          {% for error in form.recording_type.errors %}<span>{{
                            error
                          }}</span
                          >{% endfor %}
                        </div>
                        {% else %}
                        {{ form.recording_type(class="form-select") }}
                        {% endif %}
                      </div>
                    </div>

                    <div class="mb-3">
                      {{ form.coverage_description.label(class="form-label") }}
                      {% if form.coverage_description.errors %}
                      {{ form.coverage_description(class="form-control is-invalid", rows="3") }}
                      <div class="invalid-feedback">
                        {% for error in form.coverage_description.errors %}<span
                          >{{ error }}</span
                        >{% endfor %}
                      </div>
                      {% else %}
                      {{ form.coverage_description(class="form-control", rows="3", placeholder="Describe what areas your camera covers...") }}
                      {% endif %}
                    </div>

                    <div class="mb-3">
                      {{ form.retention_period.label(class="form-label") }}
                      {% if form.retention_period.errors %}
                      {{ form.retention_period(class="form-select is-invalid") }}
                      <div class="invalid-feedback">
                        {% for error in form.retention_period.errors %}<span>{{
                          error
                        }}</span
                        >{% endfor %}
                      </div>
                      {% else %}
                      {{ form.retention_period(class="form-select") }}
                      {% endif %}
                    </div>
                  </div>

                  <!-- Contact Information Section -->
                  <div class="form-section mb-4">
                    <h6 class="form-section-title">üë§ Contact Information</h6>

                    <div class="row mb-3">
                      <div class="col-md-6">
                        {{ form.owner_name.label(class="form-label") }}
                        {% if form.owner_name.errors %}
                        {{ form.owner_name(class="form-control is-invalid") }}
                        <div class="invalid-feedback">
                          {% for error in form.owner_name.errors %}<span>{{
                            error
                          }}</span
                          >{% endfor %}
                        </div>
                        {% else %}
                        {{ form.owner_name(class="form-control") }}
                        {% endif %}
                        <div class="form-text text-muted">
                          <i class="material-icons small">info</i> Pre-filled
                          from your profile
                        </div>
                      </div>
                      <div class="col-md-6">
                        {{ form.contact_email.label(class="form-label") }}
                        {% if form.contact_email.errors %}
                        {{ form.contact_email(class="form-control is-invalid") }}
                        <div class="invalid-feedback">
                          {% for error in form.contact_email.errors %}<span>{{
                            error
                          }}</span
                          >{% endfor %}
                        </div>
                        {% else %}
                        {{ form.contact_email(class="form-control") }}
                        {% endif %}
                        <div class="form-text text-muted">
                          <i class="material-icons small">info</i> Pre-filled
                          from your profile
                        </div>
                      </div>
                    </div>

                    <div class="row mb-3">
                      <div class="col-md-6">
                        {{ form.alt_contact.label(class="form-label") }}
                        {{ form.alt_contact(class="form-control", placeholder="Alternative phone number") }}
                      </div>
                      <div class="col-md-6">
                        {{ form.contact_preference.label(class="form-label") }}
                        {% if form.contact_preference.errors %}
                        {{ form.contact_preference(class="form-select is-invalid") }}
                        <div class="invalid-feedback">
                          {% for error in form.contact_preference.errors %}<span
                            >{{ error }}</span
                          >{% endfor %}
                        </div>
                        {% else %}
                        {{ form.contact_preference(class="form-select") }}
                        {% endif %}
                      </div>
                    </div>
                  </div>

                  <!-- Terms and Agreements Section -->
                  <div class="form-section mb-4">
                    <h6 class="form-section-title">üìã Terms & Agreements</h6>

                    <div class="agreement-cards">
                      <div class="agreement-card">
                        <div class="form-check">
                          {{ form.terms_check(class="form-check-input") }}
                          <label
                            class="form-check-label"
                            for="{{ form.terms_check.id }}"
                          >
                            <strong>Information Sharing Agreement</strong>
                            <p class="small text-muted">
                              I understand my camera info will be shared with
                              verified safety leaders and law enforcement when
                              necessary for incident investigations.
                            </p>
                          </label>
                        </div>
                      </div>

                      <div class="agreement-card">
                        <div class="form-check">
                          {{ form.footage_check(class="form-check-input") }}
                          <label
                            class="form-check-label"
                            for="{{ form.footage_check.id }}"
                          >
                            <strong>Footage Request Consent</strong>
                            <p class="small text-muted">
                              I agree to be contacted for footage requests
                              related to incidents in my area, understanding I
                              can decline any request.
                            </p>
                          </label>
                        </div>
                      </div>

                      <div class="agreement-card">
                        <div class="form-check">
                          {{ form.privacy_check(class="form-check-input") }}
                          <label
                            class="form-check-label"
                            for="{{ form.privacy_check.id }}"
                          >
                            <strong>Privacy Policy & Terms</strong>
                            <p class="small text-muted">
                              I agree to the
                              <a
                                href="{{ url_for('privacy_policy') }}"
                                target="_blank"
                                >Privacy Policy</a
                              >
                              and
                              <a
                                href="{{ url_for('terms_service') }}"
                                target="_blank"
                                >Terms of Service</a
                              >.
                            </p>
                          </label>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Submit Section -->
                  <div class="form-submit">
                    <div class="submit-actions">
                      {{ form.submit(class="btn btn-primary btn-lg") }}
                      <a
                        href="{{ url_for('dashboard') }}"
                        class="btn btn-outline-secondary btn-lg ms-3"
                      >
                        Cancel
                      </a>
                    </div>
                    <div class="submit-note">
                      <i class="material-icons small">shield</i>
                      <span
                        >Your information is encrypted and secure. Registration
                        will be verified within 1-2 business days.</span
                      >
                    </div>
                  </div>
                </form>
              </div>
            </div>

            <!-- Success Message (Initially Hidden) -->
            <div
              id="successMessage"
              class="feature-card success-card mt-4"
              style="display: none"
            >
              <div class="feature-icon success">
                <i class="material-icons">check_circle</i>
              </div>
              <div class="feature-content text-center">
                <h3>Camera Registration Submitted!</h3>
                <p>
                  Your camera registration has been submitted successfully. A
                  safety leader will verify your camera information within 1-2
                  business days.
                </p>
                <div class="success-actions">
                  <a href="{{ url_for('dashboard') }}" class="btn btn-primary">
                    <i class="material-icons">dashboard</i>
                    Return to Dashboard
                  </a>
                  <button
                    type="button"
                    class="btn btn-outline-primary ms-2"
                    id="registerAnother"
                  >
                    <i class="material-icons">add</i>
                    Register Another Camera
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

{% endblock %} {% block head_extra %}
<style>
  /* Custom styles for camera registration page */
  .form-section {
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(10px);
    border-radius: var(--border-radius-lg);
    padding: var(--space-lg);
    margin-bottom: var(--space-lg);
    border: 1px solid var(--border-color);
  }

  .form-section-title {
    color: var(--primary-color);
    font-weight: 600;
    margin-bottom: var(--space-md);
    display: flex;
    align-items: center;
    gap: var(--space-sm);
  }

  .map-container {
    position: relative;
    border-radius: var(--border-radius);
    overflow: hidden;
    box-shadow: var(--shadow);
  }

  .agreement-cards {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
  }

  .agreement-card {
    background: var(--bg-light);
    border-radius: var(--border-radius);
    padding: var(--space-md);
    border: 2px solid transparent;
    transition: var(--transition);
  }

  .agreement-card:hover {
    border-color: var(--secondary-light);
    background: white;
  }

  .form-submit {
    background: var(--gradient-primary);
    border-radius: var(--border-radius-lg);
    padding: var(--space-xl);
    text-align: center;
    color: white;
  }

  .submit-actions {
    margin-bottom: var(--space-md);
  }

  .submit-note {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-sm);
    font-size: var(--font-size-sm);
    opacity: 0.9;
  }

  .success-card {
    background: var(--gradient-accent);
    color: white;
  }

  .success-card .feature-icon.success {
    background: rgba(255, 255, 255, 0.2);
    color: white;
  }

  .success-actions {
    margin-top: var(--space-lg);
  }

  .feature-stats {
    display: flex;
    gap: var(--space-md);
  }

  .stat-mini {
    flex: 1;
    text-align: center;
    background: rgba(255, 255, 255, 0.1);
    padding: var(--space-sm);
    border-radius: var(--border-radius);
  }

  .stat-mini .stat-number {
    display: block;
    font-size: var(--font-size-lg);
    font-weight: 700;
    color: var(--secondary-color);
  }

  .stat-mini .stat-label {
    font-size: var(--font-size-xs);
    color: var(--text-medium);
  }

  @media (max-width: 768px) {
    .form-section {
      padding: var(--space-md);
    }

    .submit-actions .btn {
      display: block;
      width: 100%;
      margin: var(--space-sm) 0;
    }

    .feature-stats {
      flex-direction: column;
    }
  }
</style>

<script>
  // Initialize map when page loads
  function initCameraRegistrationMap() {
    // Map initialization code will go here
    // This will be connected to Google Maps API
    console.log('Camera registration map initialized')
  }

  // Form interaction enhancements
  document.addEventListener('DOMContentLoaded', function () {
    // Add any form interaction JavaScript here
    const form = document.querySelector('form')
    const successMessage = document.getElementById('successMessage')

    // Handle register another button
    const registerAnotherBtn = document.getElementById('registerAnother')
    if (registerAnotherBtn) {
      registerAnotherBtn.addEventListener('click', function () {
        successMessage.style.display = 'none'
        form.reset()
        window.scrollTo({ top: 0, behavior: 'smooth' })
      })
    }
  })
</script>
{% endblock %}
